<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Fission.Internal.Mock.Types</span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Config.Types.html"><span class="hs-identifier">Fission.Internal.Mock.Config.Types</span></a></span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html"><span class="hs-identifier">Fission.Internal.Mock.Effect.Types</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Session.Types.html"><span class="hs-identifier">Fission.Internal.Mock.Session.Types</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier">Mock</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Catch</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.AWS</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Writer</span></span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Database.Esqueleto</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Database</span></span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.IPFS.Local.Class</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.IPFS.Remote.Class</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Network.IPFS.Types</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IPFS</span></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.AWS</span></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Servant.Client</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Servant.Server</span></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Internal.Fixture.html"><span class="hs-identifier">Fission.Internal.Fixture</span></a></span><span>            </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Fixture</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Internal.Mock.Effect.html"><span class="hs-identifier">Fission.Internal.Mock.Effect</span></a></span><span>        </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Effect</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Internal.Mock.Config.Types.html"><span class="hs-identifier">Fission.Internal.Mock.Config.Types</span></a></span><span>  </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Mock</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Internal.Mock.Session.Types.html"><span class="hs-identifier">Fission.Internal.Mock.Session.Types</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Fission.Internal.Fixture.Key.Ed25519.html"><span class="hs-identifier">Fission.Internal.Fixture.Key.Ed25519</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ed25519</span></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Prelude.html"><span class="hs-identifier">Fission.Prelude</span></a></span><span>
</span><span id="line-32"></span><span> </span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.URL.html"><span class="hs-identifier">Fission.URL</span></a></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Authorization.Types.html"><span class="hs-identifier">Fission.Authorization.Types</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Authorization.Potency.Types.html"><span class="hs-identifier">Fission.Authorization.Potency.Types</span></a></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.IPFS.Linked.Class.html"><span class="hs-identifier">Fission.IPFS.Linked.Class</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.IPFS.DNSLink.Class.html"><span class="hs-identifier">Fission.IPFS.DNSLink.Class</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Models.html"><span class="hs-identifier">Fission.Models</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.User.DID.Types.html"><span class="hs-identifier">Fission.User.DID.Types</span></a></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Web.Auth.Class.html"><span class="hs-identifier">Fission.Web.Auth.Class</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Web.Client.Auth.Class.html"><span class="hs-identifier">Fission.Web.Client.Auth.Class</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Web.Server.Reflective.Class.html"><span class="hs-identifier">Fission.Web.Server.Reflective.Class</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Fission.Web.Types.html"><span class="hs-identifier">Fission.Web.Types</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Web</span></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Web.Auth.Token.Basic.Class.html"><span class="hs-identifier">Fission.Web.Auth.Token.Basic.Class</span></a></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.AWS.html"><span class="hs-identifier">Fission.AWS</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Fission.Platform.Heroku.Auth.Types.html"><span class="hs-identifier">Fission.Platform.Heroku.Auth.Types</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Heroku</span></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.User.html"><span class="hs-identifier">Fission.User</span></a></span><span>                  </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">User</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.LoosePin.html"><span class="hs-identifier">Fission.LoosePin</span></a></span><span>              </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LoosePin</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Platform.Heroku.AddOn.html"><span class="hs-identifier">Fission.Platform.Heroku.AddOn</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Heroku.AddOn</span></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-comment">-- Reexport</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html"><span class="hs-identifier">Fission.Internal.Mock.Effect.Types</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Fission.Internal.Mock.Config.Types.html"><span class="hs-identifier">Fission.Internal.Mock.Config.Types</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-comment">{- | Fission's mock type

     Notes:
     * We will likely want @State@ in here at some stage
     * @RIO@ because lots of constraints want @MonadIO@
       * Avoid actual @IO@, or we're going to have to rework this &#128521;

-}</span><span>
</span><span id="line-72"></span><span class="hs-keyword">newtype</span><span> </span><span id="Mock"><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-var">Mock</span></a></span></span><span> </span><span id="local-6989586621680254298"><span class="annot"><a href="#local-6989586621680254298"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680254297"><span class="annot"><a href="#local-6989586621680254297"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Mock"><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-var">Mock</span></a></span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AunMock%3AMock"><span class="annot"><span class="annottext">Mock effs a -&gt; WriterT [OpenUnion effs] (RIO Config) a
</span><a href="Fission.Internal.Mock.Types.html#%24sel%3AunMock%3AMock"><span class="hs-identifier hs-var hs-var">unMock</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">WriterT</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">OpenUnion</span></span><span> </span><span class="annot"><a href="#local-6989586621680254298"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RIO</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Config.Types.html#Config"><span class="hs-identifier hs-type">Mock.Config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680254297"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span> </span><span id="local-6989586621680254291"><span id="local-6989586621680254293"><span class="annot"><span class="annottext">a -&gt; Mock effs b -&gt; Mock effs a
(a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
(forall a b. (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b)
-&gt; (forall a b. a -&gt; Mock effs b -&gt; Mock effs a)
-&gt; Functor (Mock effs)
forall (effs :: [*]) a b. a -&gt; Mock effs b -&gt; Mock effs a
forall (effs :: [*]) a b. (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
forall a b. a -&gt; Mock effs b -&gt; Mock effs a
forall a b. (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; Mock effs b -&gt; Mock effs a
$c&lt;$ :: forall (effs :: [*]) a b. a -&gt; Mock effs b -&gt; Mock effs a
fmap :: (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
$cfmap :: forall (effs :: [*]) a b. (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span>
</span><span id="line-76"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680254279"><span id="local-6989586621680254281"><span id="local-6989586621680254283"><span id="local-6989586621680254285"><span id="local-6989586621680254287"><span class="annot"><span class="annottext">Functor (Mock effs)
a -&gt; Mock effs a
Functor (Mock effs) =&gt;
(forall a. a -&gt; Mock effs a)
-&gt; (forall a b. Mock effs (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; Mock effs a -&gt; Mock effs b -&gt; Mock effs c)
-&gt; (forall a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs b)
-&gt; (forall a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs a)
-&gt; Applicative (Mock effs)
Mock effs a -&gt; Mock effs b -&gt; Mock effs b
Mock effs a -&gt; Mock effs b -&gt; Mock effs a
Mock effs (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
(a -&gt; b -&gt; c) -&gt; Mock effs a -&gt; Mock effs b -&gt; Mock effs c
forall (effs :: [*]). Functor (Mock effs)
forall (effs :: [*]) a. a -&gt; Mock effs a
forall (effs :: [*]) a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs a
forall (effs :: [*]) a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs b
forall (effs :: [*]) a b.
Mock effs (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
forall (effs :: [*]) a b c.
(a -&gt; b -&gt; c) -&gt; Mock effs a -&gt; Mock effs b -&gt; Mock effs c
forall a. a -&gt; Mock effs a
forall a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs a
forall a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs b
forall a b. Mock effs (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
forall a b c.
(a -&gt; b -&gt; c) -&gt; Mock effs a -&gt; Mock effs b -&gt; Mock effs c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: Mock effs a -&gt; Mock effs b -&gt; Mock effs a
$c&lt;* :: forall (effs :: [*]) a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs a
*&gt; :: Mock effs a -&gt; Mock effs b -&gt; Mock effs b
$c*&gt; :: forall (effs :: [*]) a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs b
liftA2 :: (a -&gt; b -&gt; c) -&gt; Mock effs a -&gt; Mock effs b -&gt; Mock effs c
$cliftA2 :: forall (effs :: [*]) a b c.
(a -&gt; b -&gt; c) -&gt; Mock effs a -&gt; Mock effs b -&gt; Mock effs c
&lt;*&gt; :: Mock effs (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
$c&lt;*&gt; :: forall (effs :: [*]) a b.
Mock effs (a -&gt; b) -&gt; Mock effs a -&gt; Mock effs b
pure :: a -&gt; Mock effs a
$cpure :: forall (effs :: [*]) a. a -&gt; Mock effs a
$cp1Applicative :: forall (effs :: [*]). Functor (Mock effs)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span>
</span><span id="line-77"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680254271"><span id="local-6989586621680254273"><span id="local-6989586621680254275"><span class="annot"><span class="annottext">Applicative (Mock effs)
a -&gt; Mock effs a
Applicative (Mock effs) =&gt;
(forall a b. Mock effs a -&gt; (a -&gt; Mock effs b) -&gt; Mock effs b)
-&gt; (forall a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs b)
-&gt; (forall a. a -&gt; Mock effs a)
-&gt; Monad (Mock effs)
Mock effs a -&gt; (a -&gt; Mock effs b) -&gt; Mock effs b
Mock effs a -&gt; Mock effs b -&gt; Mock effs b
forall (effs :: [*]). Applicative (Mock effs)
forall (effs :: [*]) a. a -&gt; Mock effs a
forall (effs :: [*]) a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs b
forall (effs :: [*]) a b.
Mock effs a -&gt; (a -&gt; Mock effs b) -&gt; Mock effs b
forall a. a -&gt; Mock effs a
forall a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs b
forall a b. Mock effs a -&gt; (a -&gt; Mock effs b) -&gt; Mock effs b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: a -&gt; Mock effs a
$creturn :: forall (effs :: [*]) a. a -&gt; Mock effs a
&gt;&gt; :: Mock effs a -&gt; Mock effs b -&gt; Mock effs b
$c&gt;&gt; :: forall (effs :: [*]) a b. Mock effs a -&gt; Mock effs b -&gt; Mock effs b
&gt;&gt;= :: Mock effs a -&gt; (a -&gt; Mock effs b) -&gt; Mock effs b
$c&gt;&gt;= :: forall (effs :: [*]) a b.
Mock effs a -&gt; (a -&gt; Mock effs b) -&gt; Mock effs b
$cp1Monad :: forall (effs :: [*]). Applicative (Mock effs)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span>
</span><span id="line-78"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680254260"><span id="local-6989586621680254262"><span id="local-6989586621680254264"><span id="local-6989586621680254266"><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">OpenUnion</span></span><span> </span><span class="annot"><a href="#local-6989586621680254298"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">]</span></span></span></span></span><span>
</span><span id="line-79"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680254252"><span id="local-6989586621680254254"><span id="local-6989586621680254256"><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Config.Types.html#Config"><span class="hs-identifier hs-type">Mock.Config</span></a></span></span></span></span><span>
</span><span id="line-80"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680254248"><span class="annot"><span class="annottext">Monad (Mock effs)
Monad (Mock effs) =&gt;
(forall a. IO a -&gt; Mock effs a) -&gt; MonadIO (Mock effs)
IO a -&gt; Mock effs a
forall (effs :: [*]). Monad (Mock effs)
forall (effs :: [*]) a. IO a -&gt; Mock effs a
forall a. IO a -&gt; Mock effs a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
liftIO :: IO a -&gt; Mock effs a
$cliftIO :: forall (effs :: [*]) a. IO a -&gt; Mock effs a
$cp1MonadIO :: forall (effs :: [*]). Monad (Mock effs)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span>
</span><span id="line-81"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680254244"><span class="annot"><span class="annottext">Monad (Mock effs)
e -&gt; Mock effs a
Monad (Mock effs) =&gt;
(forall e a. Exception e =&gt; e -&gt; Mock effs a)
-&gt; MonadThrow (Mock effs)
forall (effs :: [*]). Monad (Mock effs)
forall (effs :: [*]) e a. Exception e =&gt; e -&gt; Mock effs a
forall e a. Exception e =&gt; e -&gt; Mock effs a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall e a. Exception e =&gt; e -&gt; m a) -&gt; MonadThrow m
throwM :: e -&gt; Mock effs a
$cthrowM :: forall (effs :: [*]) e a. Exception e =&gt; e -&gt; Mock effs a
$cp1MonadThrow :: forall (effs :: [*]). Monad (Mock effs)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadThrow</span></span></span><span>
</span><span id="line-82"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680254240"><span class="annot"><span class="annottext">MonadThrow (Mock effs)
MonadThrow (Mock effs) =&gt;
(forall e a.
 Exception e =&gt;
 Mock effs a -&gt; (e -&gt; Mock effs a) -&gt; Mock effs a)
-&gt; MonadCatch (Mock effs)
Mock effs a -&gt; (e -&gt; Mock effs a) -&gt; Mock effs a
forall (effs :: [*]). MonadThrow (Mock effs)
forall (effs :: [*]) e a.
Exception e =&gt;
Mock effs a -&gt; (e -&gt; Mock effs a) -&gt; Mock effs a
forall e a.
Exception e =&gt;
Mock effs a -&gt; (e -&gt; Mock effs a) -&gt; Mock effs a
forall (m :: * -&gt; *).
MonadThrow m =&gt;
(forall e a. Exception e =&gt; m a -&gt; (e -&gt; m a) -&gt; m a)
-&gt; MonadCatch m
catch :: Mock effs a -&gt; (e -&gt; Mock effs a) -&gt; Mock effs a
$ccatch :: forall (effs :: [*]) e a.
Exception e =&gt;
Mock effs a -&gt; (e -&gt; Mock effs a) -&gt; Mock effs a
$cp1MonadCatch :: forall (effs :: [*]). MonadThrow (Mock effs)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadCatch</span></span></span><span>
</span><span id="line-83"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span id="local-6989586621680254238"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#RunDB"><span class="hs-identifier hs-type">RunDB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254238"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.Internal.MonadDB.Class.html#MonadDB"><span class="hs-identifier hs-type">MonadDB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254238"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254238"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-86"></span><span>  </span><span id="local-6989586621680254234"><span class="annot"><span class="annottext">runDB :: Mock effs a -&gt; Mock effs a
</span><a href="Fission.Internal.MonadDB.Class.html#runDB"><span class="hs-identifier hs-var hs-var hs-var hs-var">runDB</span></a></span></span><span> </span><span id="local-6989586621680254232"><span class="annot"><span class="annottext">transaction :: Mock effs a
</span><a href="#local-6989586621680254232"><span class="hs-identifier hs-var">transaction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><span class="annottext">RunDB -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">RunDB
</span><a href="Fission.Internal.Mock.Effect.Types.html#RunDB"><span class="hs-identifier hs-var">RunDB</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><span class="annottext">Mock effs a
</span><a href="#local-6989586621680254232"><span class="hs-identifier hs-var">transaction</span></a></span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span id="local-6989586621680254229"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Fission.IPFS.Linked.Class.html#MonadLinkedIPFS"><span class="hs-identifier hs-type">MonadLinkedIPFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254229"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-91"></span><span>  </span><span id="local-6989586621680254225"><span class="annot"><span class="annottext">getLinkedPeers :: Mock effs (NonEmpty Peer)
</span><a href="Fission.IPFS.Linked.Class.html#getLinkedPeers"><span class="hs-identifier hs-var hs-var hs-var hs-var">getLinkedPeers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-92"></span><span>    </span><span id="local-6989586621680254223"><span class="annot"><span class="annottext">NonEmpty Peer
</span><a href="#local-6989586621680254223"><span class="hs-identifier hs-var">peerList</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Config -&gt; NonEmpty Peer) -&gt; Mock effs (NonEmpty Peer)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; NonEmpty Peer
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AlinkedPeers%3AConfig"><span class="hs-identifier hs-var hs-var">linkedPeers</span></a></span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="annot"><span class="annottext">NonEmpty Peer
</span><a href="#local-6989586621680254223"><span class="hs-identifier hs-var">peerList</span></a></span></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span id="local-6989586621680254220"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Fission.Web.Auth.Token.Basic.Class.html#MonadBasicAuth"><span class="hs-identifier hs-type">MonadBasicAuth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254220"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-96"></span><span>  </span><span id="local-6989586621680254216"><span class="annot"><span class="annottext">getVerifier :: Mock effs (BasicAuthCheck String)
</span><a href="Fission.Web.Auth.Token.Basic.Class.html#getVerifier"><span class="hs-identifier hs-var hs-var hs-var hs-var">getVerifier</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-97"></span><span>    </span><span id="local-6989586621680254214"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680254214"><span class="hs-identifier hs-var">isAuthed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Bool) -&gt; Mock effs Bool
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Bool
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AforceAuthed%3AConfig"><span class="hs-identifier hs-var hs-var">forceAuthed</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">(BasicAuthData -&gt; IO (BasicAuthResult String))
-&gt; BasicAuthCheck String
forall usr.
(BasicAuthData -&gt; IO (BasicAuthResult usr)) -&gt; BasicAuthCheck usr
</span><span class="hs-identifier hs-var">BasicAuthCheck</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-99"></span><span>      </span><span class="annot"><span class="annottext">BasicAuthResult String -&gt; IO (BasicAuthResult String)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680254214"><span class="hs-identifier hs-var">isAuthed</span></a></span><span>
</span><span id="line-100"></span><span>                  </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; BasicAuthResult String
forall usr. usr -&gt; BasicAuthResult usr
</span><span class="hs-identifier hs-var">Authorized</span></span><span> </span><span class="annot"><span class="hs-string">&quot;YUP&quot;</span></span><span>
</span><span id="line-101"></span><span>                  </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">BasicAuthResult String
forall usr. BasicAuthResult usr
</span><span class="hs-identifier hs-var">Unauthorized</span></span></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span id="local-6989586621680254209"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Fission.Web.Auth.Token.Basic.Class.html#MonadBasicAuth"><span class="hs-identifier hs-type">MonadBasicAuth</span></a></span><span> </span><span class="annot"><a href="Fission.Platform.Heroku.Auth.Types.html#Auth"><span class="hs-identifier hs-type">Heroku.Auth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254209"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-104"></span><span>  </span><span id="local-6989586621680254206"><span class="annot"><span class="annottext">getVerifier :: Mock effs (BasicAuthCheck Auth)
</span><a href="#local-6989586621680254206"><span class="hs-identifier hs-var hs-var hs-var hs-var">getVerifier</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Config -&gt; BasicAuthCheck Auth) -&gt; Mock effs (BasicAuthCheck Auth)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; BasicAuthCheck Auth
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AherokuVerifier%3AConfig"><span class="hs-identifier hs-var hs-var">herokuVerifier</span></a></span></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span id="local-6989586621680254204"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Fission.Web.Auth.Class.html#MonadAuth"><span class="hs-identifier hs-type">MonadAuth</span></a></span><span> </span><span class="annot"><a href="Fission.User.DID.Types.html#DID"><span class="hs-identifier hs-type">DID</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254204"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-107"></span><span>  </span><span id="local-6989586621680254200"><span class="annot"><span class="annottext">getVerifier :: Mock effs (AuthHandler Request DID)
</span><a href="Fission.Web.Auth.Class.html#getVerifier"><span class="hs-identifier hs-var hs-var hs-var hs-var">getVerifier</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Config -&gt; AuthHandler Request DID)
-&gt; Mock effs (AuthHandler Request DID)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; AuthHandler Request DID
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AdidVerifier%3AConfig"><span class="hs-identifier hs-var hs-var">didVerifier</span></a></span></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span id="local-6989586621680254197"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Fission.Web.Auth.Class.html#MonadAuth"><span class="hs-identifier hs-type">MonadAuth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Entity</span></span><span> </span><span class="annot"><a href="Fission.Models.html#User"><span class="hs-identifier hs-type">User</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254197"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>  </span><span id="local-6989586621680254194"><span class="annot"><span class="annottext">getVerifier :: Mock effs (AuthHandler Request (Entity User))
</span><a href="#local-6989586621680254194"><span class="hs-identifier hs-var hs-var hs-var hs-var">getVerifier</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Config -&gt; AuthHandler Request (Entity User))
-&gt; Mock effs (AuthHandler Request (Entity User))
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; AuthHandler Request (Entity User)
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AuserVerifier%3AConfig"><span class="hs-identifier hs-var hs-var">userVerifier</span></a></span></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="local-6989586621680254192"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Fission.Web.Auth.Class.html#MonadAuth"><span class="hs-identifier hs-type">MonadAuth</span></a></span><span> </span><span class="annot"><a href="Fission.Authorization.Types.html#Authorization"><span class="hs-identifier hs-type">Authorization</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254192"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-113"></span><span>  </span><span id="local-6989586621680254189"><span class="annot"><span class="annottext">getVerifier :: Mock effs (AuthHandler Request Authorization)
</span><a href="#local-6989586621680254189"><span class="hs-identifier hs-var hs-var hs-var hs-var">getVerifier</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Config -&gt; AuthHandler Request Authorization)
-&gt; Mock effs (AuthHandler Request Authorization)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; AuthHandler Request Authorization
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AauthVerifier%3AConfig"><span class="hs-identifier hs-var hs-var">authVerifier</span></a></span></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span id="local-6989586621680254187"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#RunAWS"><span class="hs-identifier hs-type">RunAWS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254187"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadAWS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254187"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-116"></span><span>  </span><span id="local-6989586621680254179"><span class="annot"><span class="annottext">liftAWS :: AWS a -&gt; Mock effs a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">liftAWS</span></span></span><span> </span><span id="local-6989586621680254177"><span class="annot"><span class="annottext">awsAction :: AWS a
</span><a href="#local-6989586621680254177"><span class="hs-identifier hs-var">awsAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="annottext">RunAWS -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">RunAWS
</span><a href="Fission.Internal.Mock.Effect.Types.html#RunAWS"><span class="hs-identifier hs-var">RunAWS</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span id="local-6989586621680254175"><span class="annot"><span class="annottext">Env
</span><a href="#local-6989586621680254175"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credentials -&gt; Mock effs Env
forall (m :: * -&gt; *).
(Applicative m, MonadIO m, MonadCatch m) =&gt;
Credentials -&gt; m Env
</span><span class="hs-identifier hs-var">newEnv</span></span><span> </span><span class="annot"><span class="annottext">(Credentials -&gt; Mock effs Env) -&gt; Credentials -&gt; Mock effs Env
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AccessKey -&gt; SecretKey -&gt; Credentials
</span><span class="hs-identifier hs-var">FromKeys</span></span><span> </span><span class="annot"><span class="hs-string">&quot;FAKE_ACCESS_KEY&quot;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;FAKE_SECRET_KEY&quot;</span></span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="annottext">IO a -&gt; Mock effs a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; Mock effs a)
-&gt; (ResourceT IO a -&gt; IO a) -&gt; ResourceT IO a -&gt; Mock effs a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ResourceT IO a -&gt; IO a
forall (m :: * -&gt; *) a. MonadUnliftIO m =&gt; ResourceT m a -&gt; m a
</span><span class="hs-identifier hs-var">runResourceT</span></span><span> </span><span class="annot"><span class="annottext">(ResourceT IO a -&gt; Mock effs a) -&gt; ResourceT IO a -&gt; Mock effs a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Env -&gt; AWS a -&gt; ResourceT IO a
forall r (m :: * -&gt; *) a. HasEnv r =&gt; r -&gt; AWST' r m a -&gt; m a
</span><span class="hs-identifier hs-var">runAWST</span></span><span> </span><span class="annot"><span class="annottext">Env
</span><a href="#local-6989586621680254175"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">AWS a
</span><a href="#local-6989586621680254177"><span class="hs-identifier hs-var">awsAction</span></a></span></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span id="local-6989586621680254168"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#CheckTime"><span class="hs-identifier hs-type">CheckTime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254168"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadTime</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254168"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-122"></span><span>  </span><span id="local-6989586621680254164"><span class="annot"><span class="annottext">currentTime :: Mock effs UTCTime
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">currentTime</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="annottext">CheckTime -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTime
</span><a href="Fission.Internal.Mock.Effect.Types.html#CheckTime"><span class="hs-identifier hs-var">CheckTime</span></a></span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><span class="annottext">(Config -&gt; UTCTime) -&gt; Mock effs UTCTime
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; UTCTime
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3Anow%3AConfig"><span class="hs-identifier hs-var hs-var">now</span></a></span></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span id="local-6989586621680254160"><span class="hs-keyword">instance</span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#RunAWS"><span class="hs-identifier hs-type">RunAWS</span></a></span><span>        </span><span class="annot"><a href="#local-6989586621680254160"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#UpdateRoute53"><span class="hs-identifier hs-type">UpdateRoute53</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254160"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#ClearRoute53"><span class="hs-identifier hs-type">ClearRoute53</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621680254160"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.AWS.Route53.Class.html#MonadRoute53"><span class="hs-identifier hs-type">MonadRoute53</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254160"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-132"></span><span>  </span><span id="local-6989586621680254155"><span class="annot"><span class="annottext">set :: RecordType
-&gt; URL
-&gt; ZoneID
-&gt; NonEmpty Text
-&gt; Mock effs (Either ServerError ChangeResourceRecordSetsResponse)
</span><a href="Fission.AWS.Route53.Class.html#set"><span class="hs-identifier hs-var hs-var hs-var hs-var">set</span></a></span></span><span> </span><span id="local-6989586621680254153"><span class="annot"><span class="annottext">r :: RecordType
</span><a href="#local-6989586621680254153"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621680254152"><span class="annot"><span class="annottext">url :: URL
</span><a href="#local-6989586621680254152"><span class="hs-identifier hs-var">url</span></a></span></span><span> </span><span id="local-6989586621680254151"><span class="annot"><span class="annottext">zone :: ZoneID
</span><a href="#local-6989586621680254151"><span class="hs-identifier hs-var">zone</span></a></span></span><span> </span><span id="local-6989586621680254150"><span class="annot"><span class="annottext">nonEmptyTxts :: NonEmpty Text
</span><a href="#local-6989586621680254150"><span class="hs-identifier hs-var">nonEmptyTxts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><span class="annottext">UpdateRoute53 -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateRoute53
</span><a href="Fission.Internal.Mock.Effect.Types.html#UpdateRoute53"><span class="hs-identifier hs-var">UpdateRoute53</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span id="local-6989586621680254148"><span class="annot"><span class="annottext">RecordType
-&gt; URL
-&gt; ZoneID
-&gt; NonEmpty Text
-&gt; Either ServerError ChangeResourceRecordSetsResponse
</span><a href="#local-6989586621680254148"><span class="hs-identifier hs-var">runner</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Config
 -&gt; RecordType
 -&gt; URL
 -&gt; ZoneID
 -&gt; NonEmpty Text
 -&gt; Either ServerError ChangeResourceRecordSetsResponse)
-&gt; Mock
     effs
     (RecordType
      -&gt; URL
      -&gt; ZoneID
      -&gt; NonEmpty Text
      -&gt; Either ServerError ChangeResourceRecordSetsResponse)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config
-&gt; RecordType
-&gt; URL
-&gt; ZoneID
-&gt; NonEmpty Text
-&gt; Either ServerError ChangeResourceRecordSetsResponse
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AupdateRoute53%3AConfig"><span class="hs-identifier hs-var hs-var">updateRoute53</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">RecordType
-&gt; URL
-&gt; ZoneID
-&gt; NonEmpty Text
-&gt; Either ServerError ChangeResourceRecordSetsResponse
</span><a href="#local-6989586621680254148"><span class="hs-identifier hs-var">runner</span></a></span><span> </span><span class="annot"><span class="annottext">RecordType
</span><a href="#local-6989586621680254153"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">URL
</span><a href="#local-6989586621680254152"><span class="hs-identifier hs-var">url</span></a></span><span> </span><span class="annot"><span class="annottext">ZoneID
</span><a href="#local-6989586621680254151"><span class="hs-identifier hs-var">zone</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621680254150"><span class="hs-identifier hs-var">nonEmptyTxts</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span>  </span><span id="local-6989586621680254146"><span class="annot"><span class="annottext">clear :: RecordType
-&gt; URL
-&gt; ZoneID
-&gt; Mock effs (Either ServerError ChangeResourceRecordSetsResponse)
</span><a href="Fission.AWS.Route53.Class.html#clear"><span class="hs-identifier hs-var hs-var hs-var hs-var">clear</span></a></span></span><span> </span><span id="local-6989586621680254144"><span class="annot"><span class="annottext">r :: RecordType
</span><a href="#local-6989586621680254144"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621680254143"><span class="annot"><span class="annottext">url :: URL
</span><a href="#local-6989586621680254143"><span class="hs-identifier hs-var">url</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><span class="annottext">ClearRoute53 -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">ClearRoute53
</span><a href="Fission.Internal.Mock.Effect.Types.html#ClearRoute53"><span class="hs-identifier hs-var">ClearRoute53</span></a></span><span>
</span><span id="line-139"></span><span>    </span><span id="local-6989586621680254141"><span class="annot"><span class="annottext">RecordType
-&gt; URL -&gt; Either ServerError ChangeResourceRecordSetsResponse
</span><a href="#local-6989586621680254141"><span class="hs-identifier hs-var">runner</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Config
 -&gt; RecordType
 -&gt; URL
 -&gt; Either ServerError ChangeResourceRecordSetsResponse)
-&gt; Mock
     effs
     (RecordType
      -&gt; URL -&gt; Either ServerError ChangeResourceRecordSetsResponse)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config
-&gt; RecordType
-&gt; URL
-&gt; Either ServerError ChangeResourceRecordSetsResponse
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AclearRoute53%3AConfig"><span class="hs-identifier hs-var hs-var">clearRoute53</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">RecordType
-&gt; URL -&gt; Either ServerError ChangeResourceRecordSetsResponse
</span><a href="#local-6989586621680254141"><span class="hs-identifier hs-var">runner</span></a></span><span> </span><span class="annot"><span class="annottext">RecordType
</span><a href="#local-6989586621680254144"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">URL
</span><a href="#local-6989586621680254143"><span class="hs-identifier hs-var">url</span></a></span></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span id="local-6989586621680254139"><span class="hs-keyword">instance</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#UpdateRoute53"><span class="hs-identifier hs-type">UpdateRoute53</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254139"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#ClearRoute53"><span class="hs-identifier hs-type">ClearRoute53</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621680254139"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#SetDNSLink"><span class="hs-identifier hs-type">SetDNSLink</span></a></span><span>    </span><span class="annot"><a href="#local-6989586621680254139"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#FollowDNSLink"><span class="hs-identifier hs-type">FollowDNSLink</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254139"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#RunAWS"><span class="hs-identifier hs-type">RunAWS</span></a></span><span>        </span><span class="annot"><a href="#local-6989586621680254139"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.IPFS.DNSLink.Class.html#MonadDNSLink"><span class="hs-identifier hs-type">MonadDNSLink</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254139"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621680254134"><span class="annot"><span class="annottext">set :: UserId -&gt; URL -&gt; ZoneID -&gt; CID -&gt; Mock effs (Either Errors URL)
</span><a href="Fission.IPFS.DNSLink.Class.html#set"><span class="hs-identifier hs-var hs-var hs-var hs-var">set</span></a></span></span><span> </span><span id="local-6989586621680254132"><span class="annot"><span class="annottext">_userID :: UserId
</span><a href="#local-6989586621680254132"><span class="hs-identifier hs-var">_userID</span></a></span></span><span> </span><span id="local-6989586621680254130"><span id="local-6989586621680254131"><span class="annot"><a href="Fission.URL.Types.html#URL"><span class="hs-identifier hs-type">URL</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680254126"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680254126"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><span class="annottext">SetDNSLink -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">SetDNSLink
</span><a href="Fission.Internal.Mock.Effect.Types.html#SetDNSLink"><span class="hs-identifier hs-var">SetDNSLink</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621680254124"><span class="annot"><span class="annottext">DomainName -&gt; Maybe Subdomain -&gt; CID -&gt; Either Errors URL
</span><a href="#local-6989586621680254124"><span class="hs-identifier hs-var">runner</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Config
 -&gt; DomainName -&gt; Maybe Subdomain -&gt; CID -&gt; Either Errors URL)
-&gt; Mock
     effs (DomainName -&gt; Maybe Subdomain -&gt; CID -&gt; Either Errors URL)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; DomainName -&gt; Maybe Subdomain -&gt; CID -&gt; Either Errors URL
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AsetDNSLink%3AConfig"><span class="hs-identifier hs-var hs-var">setDNSLink</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">DomainName -&gt; Maybe Subdomain -&gt; CID -&gt; Either Errors URL
</span><a href="#local-6989586621680254124"><span class="hs-identifier hs-var">runner</span></a></span><span> </span><span class="annot"><span class="annottext">DomainName
</span><a href="#local-6989586621680254131"><span class="hs-identifier hs-var">domainName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Subdomain
</span><a href="#local-6989586621680254130"><span class="hs-identifier hs-var">subdomain</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680254126"><span class="hs-identifier hs-var">cid</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span>  </span><span id="local-6989586621680254122"><span class="annot"><span class="annottext">follow :: UserId -&gt; URL -&gt; ZoneID -&gt; Path URL -&gt; Mock effs (Either Errors ())
</span><a href="Fission.IPFS.DNSLink.Class.html#follow"><span class="hs-identifier hs-var hs-var hs-var hs-var">follow</span></a></span></span><span> </span><span id="local-6989586621680254120"><span class="annot"><span class="annottext">_userID :: UserId
</span><a href="#local-6989586621680254120"><span class="hs-identifier hs-var">_userID</span></a></span></span><span> </span><span id="local-6989586621680254119"><span class="annot"><span class="annottext">toSet :: URL
</span><a href="#local-6989586621680254119"><span class="hs-identifier hs-var">toSet</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680254118"><span class="annot"><span class="annottext">toFollow :: Path URL
</span><a href="#local-6989586621680254118"><span class="hs-identifier hs-var">toFollow</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><span class="annottext">FollowDNSLink -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(FollowDNSLink -&gt; Mock effs ()) -&gt; FollowDNSLink -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">URL -&gt; Path URL -&gt; FollowDNSLink
</span><a href="Fission.Internal.Mock.Effect.Types.html#FollowDNSLink"><span class="hs-identifier hs-var">FollowDNSLink</span></a></span><span> </span><span class="annot"><span class="annottext">URL
</span><a href="#local-6989586621680254119"><span class="hs-identifier hs-var">toSet</span></a></span><span> </span><span class="annot"><span class="annottext">Path URL
</span><a href="#local-6989586621680254118"><span class="hs-identifier hs-var">toFollow</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span id="local-6989586621680254116"><span class="annot"><span class="annottext">URL -&gt; Path URL -&gt; Either Errors ()
</span><a href="#local-6989586621680254116"><span class="hs-identifier hs-var">runner</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Config -&gt; URL -&gt; Path URL -&gt; Either Errors ())
-&gt; Mock effs (URL -&gt; Path URL -&gt; Either Errors ())
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; URL -&gt; Path URL -&gt; Either Errors ()
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AfollowDNSLink%3AConfig"><span class="hs-identifier hs-var hs-var">followDNSLink</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">URL -&gt; Path URL -&gt; Either Errors ()
</span><a href="#local-6989586621680254116"><span class="hs-identifier hs-var">runner</span></a></span><span> </span><span class="annot"><span class="annottext">URL
</span><a href="#local-6989586621680254119"><span class="hs-identifier hs-var">toSet</span></a></span><span> </span><span class="annot"><span class="annottext">Path URL
</span><a href="#local-6989586621680254118"><span class="hs-identifier hs-var">toFollow</span></a></span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span id="local-6989586621680254114"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#RunLocalIPFS"><span class="hs-identifier hs-type">RunLocalIPFS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254114"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadLocalIPFS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254114"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621680254110"><span class="annot"><span class="annottext">runLocal :: [String] -&gt; ByteString -&gt; Mock effs (Either Error ByteString)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">runLocal</span></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><span class="annottext">RunLocalIPFS -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">RunLocalIPFS
</span><a href="Fission.Internal.Mock.Effect.Types.html#RunLocalIPFS"><span class="hs-identifier hs-var">RunLocalIPFS</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span class="annot"><span class="annottext">(Config -&gt; Either Error ByteString)
-&gt; Mock effs (Either Error ByteString)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Either Error ByteString
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AlocalIPFSCall%3AConfig"><span class="hs-identifier hs-var hs-var">localIPFSCall</span></a></span></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span id="local-6989586621680254106"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#RunRemoteIPFS"><span class="hs-identifier hs-type">RunRemoteIPFS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254106"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadRemoteIPFS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254106"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-166"></span><span>  </span><span id="local-6989586621680254098"><span class="annot"><span class="annottext">runRemote :: ClientM a -&gt; Mock effs (Either ClientError a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">runRemote</span></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><span class="annottext">RunRemoteIPFS -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">RunRemoteIPFS
</span><a href="Fission.Internal.Mock.Effect.Types.html#RemoteIPFSGeneric"><span class="hs-identifier hs-var">RemoteIPFSGeneric</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Mock effs (Either ClientError a)
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Directly called runRemote&quot;</span></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>  </span><span id="local-6989586621680254094"><span class="annot"><span class="annottext">ipfsAdd :: ByteString -&gt; Mock effs (Either ClientError CID)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">ipfsAdd</span></span></span><span> </span><span id="local-6989586621680254092"><span class="annot"><span class="annottext">bs :: ByteString
</span><a href="#local-6989586621680254092"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><span class="annottext">RunRemoteIPFS -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RunRemoteIPFS -&gt; Mock effs ()) -&gt; RunRemoteIPFS -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; RunRemoteIPFS
</span><a href="Fission.Internal.Mock.Effect.Types.html#RemoteIPFSAdd"><span class="hs-identifier hs-var">RemoteIPFSAdd</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680254092"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><span class="annottext">(Config -&gt; Either ClientError CID)
-&gt; Mock effs (Either ClientError CID)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Either ClientError CID
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AremoteIPFSAdd%3AConfig"><span class="hs-identifier hs-var hs-var">remoteIPFSAdd</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>  </span><span id="local-6989586621680254089"><span class="annot"><span class="annottext">ipfsCat :: CID -&gt; Mock effs (Either ClientError Serialized)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">ipfsCat</span></span></span><span> </span><span id="local-6989586621680254087"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680254087"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><span class="annottext">RunRemoteIPFS -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RunRemoteIPFS -&gt; Mock effs ()) -&gt; RunRemoteIPFS -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CID -&gt; RunRemoteIPFS
</span><a href="Fission.Internal.Mock.Effect.Types.html#RemoteIPFSCat"><span class="hs-identifier hs-var">RemoteIPFSCat</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680254087"><span class="hs-identifier hs-var">cid</span></a></span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><span class="annottext">(Config -&gt; Either ClientError Serialized)
-&gt; Mock effs (Either ClientError Serialized)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Either ClientError Serialized
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AremoteIPFSCat%3AConfig"><span class="hs-identifier hs-var hs-var">remoteIPFSCat</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>  </span><span id="local-6989586621680254084"><span class="annot"><span class="annottext">ipfsPin :: CID -&gt; Mock effs (Either ClientError Response)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">ipfsPin</span></span></span><span> </span><span id="local-6989586621680254082"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680254082"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">RunRemoteIPFS -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RunRemoteIPFS -&gt; Mock effs ()) -&gt; RunRemoteIPFS -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CID -&gt; RunRemoteIPFS
</span><a href="Fission.Internal.Mock.Effect.Types.html#RemoteIPFSPin"><span class="hs-identifier hs-var">RemoteIPFSPin</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680254082"><span class="hs-identifier hs-var">cid</span></a></span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><span class="annottext">(Config -&gt; Either ClientError Response)
-&gt; Mock effs (Either ClientError Response)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Either ClientError Response
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AremoteIPFSPin%3AConfig"><span class="hs-identifier hs-var hs-var">remoteIPFSPin</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span>  </span><span id="local-6989586621680254079"><span class="annot"><span class="annottext">ipfsUnpin :: CID -&gt; Bool -&gt; Mock effs (Either ClientError Response)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">ipfsUnpin</span></span></span><span> </span><span id="local-6989586621680254077"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680254077"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span id="local-6989586621680254076"><span class="annot"><span class="annottext">flag :: Bool
</span><a href="#local-6989586621680254076"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><span class="annottext">RunRemoteIPFS -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RunRemoteIPFS -&gt; Mock effs ()) -&gt; RunRemoteIPFS -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CID -&gt; Bool -&gt; RunRemoteIPFS
</span><a href="Fission.Internal.Mock.Effect.Types.html#RemoteIPFSUnpin"><span class="hs-identifier hs-var">RemoteIPFSUnpin</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680254077"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680254076"><span class="hs-identifier hs-var">flag</span></a></span><span>
</span><span id="line-184"></span><span>    </span><span class="annot"><span class="annottext">(Config -&gt; Either ClientError Response)
-&gt; Mock effs (Either ClientError Response)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Either ClientError Response
</span><a href="Fission.Internal.Mock.Config.Types.html#%24sel%3AremoteIPFSUnpin%3AConfig"><span class="hs-identifier hs-var hs-var">remoteIPFSUnpin</span></a></span></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span id="local-6989586621680254073"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Fission.Web.Server.Reflective.Class.html#MonadReflectiveServer"><span class="hs-identifier hs-type">MonadReflectiveServer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254073"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-187"></span><span>  </span><span id="local-6989586621680254069"><span class="annot"><span class="annottext">getHost :: Mock effs Host
</span><a href="Fission.Web.Server.Reflective.Class.html#getHost"><span class="hs-identifier hs-var hs-var hs-var hs-var">getHost</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BaseUrl -&gt; Host
</span><a href="Fission.Web.Types.html#Host"><span class="hs-identifier hs-var">Web.Host</span></a></span><span> </span><span class="annot"><span class="annottext">(BaseUrl -&gt; Host) -&gt; Mock effs BaseUrl -&gt; Mock effs Host
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Mock effs BaseUrl
forall (m :: * -&gt; *). MonadThrow m =&gt; String -&gt; m BaseUrl
</span><span class="hs-identifier hs-var">parseBaseUrl</span></span><span> </span><span class="annot"><span class="hs-string">&quot;example.com&quot;</span></span></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span id="local-6989586621680254064"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#LogMsg"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254064"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadLogger</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254064"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>  </span><span id="local-6989586621680254060"><span class="annot"><span class="annottext">monadLoggerLog :: Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; Mock effs ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">monadLoggerLog</span></span></span><span> </span><span id="local-6989586621680254058"><span class="annot"><span class="annottext">loc :: Loc
</span><a href="#local-6989586621680254058"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680254057"><span class="annot"><span class="annottext">src :: Text
</span><a href="#local-6989586621680254057"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621680254056"><span class="annot"><span class="annottext">lvl :: LogLevel
</span><a href="#local-6989586621680254056"><span class="hs-identifier hs-var">lvl</span></a></span></span><span> </span><span id="local-6989586621680254055"><span class="annot"><span class="annottext">msg :: msg
</span><a href="#local-6989586621680254055"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><span class="annottext">LogMsg -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg -&gt; Mock effs ())
-&gt; (LogStr -&gt; LogMsg) -&gt; LogStr -&gt; Mock effs ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LogLevel -&gt; LogStr -&gt; LogMsg
</span><a href="Fission.Internal.Mock.Effect.Types.html#LogMsg"><span class="hs-identifier hs-var">LogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><a href="#local-6989586621680254056"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="annot"><span class="annottext">(LogStr -&gt; Mock effs ()) -&gt; LogStr -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">msg -&gt; LogStr
forall msg. ToLogStr msg =&gt; msg -&gt; LogStr
</span><span class="hs-identifier hs-var">toLogStr</span></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621680254055"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-192"></span><span>    </span><span class="annot"><span class="annottext">Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; Mock effs ()
forall (m :: * -&gt; *) msg.
(MonadLogger m, ToLogStr msg) =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; m ()
</span><span class="hs-identifier hs-var">monadLoggerLog</span></span><span> </span><span class="annot"><span class="annottext">Loc
</span><a href="#local-6989586621680254058"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680254057"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><a href="#local-6989586621680254056"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621680254055"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span id="local-6989586621680254052"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#DestroyHerokuAddOn"><span class="hs-identifier hs-type">DestroyHerokuAddOn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254052"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.Platform.Heroku.AddOn.Destroyer.Class.html#Destroyer"><span class="hs-identifier hs-type">Heroku.AddOn.Destroyer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254052"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-195"></span><span>  </span><span id="local-6989586621680254048"><span class="annot"><span class="annottext">destroyByUUID :: UUID -&gt; Mock effs ()
</span><a href="Fission.Platform.Heroku.AddOn.Destroyer.Class.html#destroyByUUID"><span class="hs-identifier hs-var hs-var hs-var hs-var">destroyByUUID</span></a></span></span><span> </span><span id="local-6989586621680254046"><span class="annot"><span class="annottext">uuid :: UUID
</span><a href="#local-6989586621680254046"><span class="hs-identifier hs-var">uuid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><span class="annottext">DestroyHerokuAddOn -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(DestroyHerokuAddOn -&gt; Mock effs ())
-&gt; DestroyHerokuAddOn -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UUID -&gt; DestroyHerokuAddOn
</span><a href="Fission.Internal.Mock.Effect.Types.html#DestroyHerokuAddOn"><span class="hs-identifier hs-var">DestroyHerokuAddOn</span></a></span><span> </span><span class="annot"><span class="annottext">UUID
</span><a href="#local-6989586621680254046"><span class="hs-identifier hs-var">uuid</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span id="local-6989586621680254044"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#DestroyHerokuAddOn"><span class="hs-identifier hs-type">DestroyHerokuAddOn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254044"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.Platform.Heroku.AddOn.Retriever.Class.html#Retriever"><span class="hs-identifier hs-type">Heroku.AddOn.Retriever</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254044"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-200"></span><span>  </span><span id="local-6989586621680254040"><span class="annot"><span class="annottext">getByUUID :: UUID -&gt; Mock effs (Maybe (Entity HerokuAddOn))
</span><a href="Fission.Platform.Heroku.AddOn.Retriever.Class.html#getByUUID"><span class="hs-identifier hs-var hs-var hs-var hs-var">getByUUID</span></a></span></span><span> </span><span id="local-6989586621680254038"><span class="annot"><span class="annottext">uuid :: UUID
</span><a href="#local-6989586621680254038"><span class="hs-identifier hs-var">uuid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="annottext">DestroyHerokuAddOn -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(DestroyHerokuAddOn -&gt; Mock effs ())
-&gt; DestroyHerokuAddOn -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UUID -&gt; DestroyHerokuAddOn
</span><a href="Fission.Internal.Mock.Effect.Types.html#DestroyHerokuAddOn"><span class="hs-identifier hs-var">DestroyHerokuAddOn</span></a></span><span> </span><span class="annot"><span class="annottext">UUID
</span><a href="#local-6989586621680254038"><span class="hs-identifier hs-var">uuid</span></a></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="annot"><span class="annottext">Maybe (Entity HerokuAddOn)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span id="local-6989586621680254037"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#CreateHerokuAddOn"><span class="hs-identifier hs-type">CreateHerokuAddOn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254037"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.Platform.Heroku.AddOn.Creator.Class.html#Creator"><span class="hs-identifier hs-type">Heroku.AddOn.Creator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254037"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-205"></span><span>  </span><span id="local-6989586621680254033"><span class="annot"><span class="annottext">create :: UUID
-&gt; Region
-&gt; UTCTime
-&gt; Mock effs (Either (AlreadyExists HerokuAddOn) HerokuAddOnId)
</span><a href="Fission.Platform.Heroku.AddOn.Creator.Class.html#create"><span class="hs-identifier hs-var hs-var hs-var hs-var">create</span></a></span></span><span> </span><span id="local-6989586621680254031"><span class="annot"><span class="annottext">uuid :: UUID
</span><a href="#local-6989586621680254031"><span class="hs-identifier hs-var">uuid</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><span class="annottext">CreateHerokuAddOn -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(CreateHerokuAddOn -&gt; Mock effs ())
-&gt; CreateHerokuAddOn -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UUID -&gt; CreateHerokuAddOn
</span><a href="Fission.Internal.Mock.Effect.Types.html#CreateHerokuAddOn"><span class="hs-identifier hs-var">CreateHerokuAddOn</span></a></span><span> </span><span class="annot"><span class="annottext">UUID
</span><a href="#local-6989586621680254031"><span class="hs-identifier hs-var">uuid</span></a></span><span>
</span><span id="line-207"></span><span>    </span><span class="annot"><span class="annottext">Either (AlreadyExists HerokuAddOn) HerokuAddOnId
-&gt; Mock effs (Either (AlreadyExists HerokuAddOn) HerokuAddOnId)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either (AlreadyExists HerokuAddOn) HerokuAddOnId
 -&gt; Mock effs (Either (AlreadyExists HerokuAddOn) HerokuAddOnId))
-&gt; (HerokuAddOnId
    -&gt; Either (AlreadyExists HerokuAddOn) HerokuAddOnId)
-&gt; HerokuAddOnId
-&gt; Mock effs (Either (AlreadyExists HerokuAddOn) HerokuAddOnId)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HerokuAddOnId -&gt; Either (AlreadyExists HerokuAddOn) HerokuAddOnId
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(HerokuAddOnId
 -&gt; Mock effs (Either (AlreadyExists HerokuAddOn) HerokuAddOnId))
-&gt; HerokuAddOnId
-&gt; Mock effs (Either (AlreadyExists HerokuAddOn) HerokuAddOnId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; HerokuAddOnId
forall record.
ToBackendKey SqlBackend record =&gt;
Int64 -&gt; Key record
</span><span class="hs-identifier hs-var">Database.toSqlKey</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span id="local-6989586621680254028"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#RetrieveUser"><span class="hs-identifier hs-type">RetrieveUser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254028"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.User.Retriever.Class.html#Retriever"><span class="hs-identifier hs-type">User.Retriever</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680254028"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>  </span><span id="local-6989586621680254020"><span class="annot"><span class="annottext">getById :: UserId -&gt; Mock effs (Maybe (Entity User))
</span><a href="Fission.User.Retriever.Class.html#getById"><span class="hs-identifier hs-var hs-var hs-var hs-var">getById</span></a></span></span><span> </span><span id="local-6989586621680254018"><span class="annot"><span class="annottext">userId :: UserId
</span><a href="#local-6989586621680254018"><span class="hs-identifier hs-var">userId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="annottext">RetrieveUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RetrieveUser -&gt; Mock effs ()) -&gt; RetrieveUser -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; RetrieveUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#GetUserById"><span class="hs-identifier hs-var">GetUserById</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680254018"><span class="hs-identifier hs-var">userId</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User)))
-&gt; (Entity User -&gt; Maybe (Entity User))
-&gt; Entity User
-&gt; Mock effs (Maybe (Entity User))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Entity User -&gt; Maybe (Entity User)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Entity User -&gt; Mock effs (Maybe (Entity User)))
-&gt; Entity User -&gt; Mock effs (Maybe (Entity User))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">User -&gt; Entity User
forall model.
ToBackendKey SqlBackend model =&gt;
model -&gt; Entity model
</span><a href="Fission.Internal.Fixture.Entity.html#entity"><span class="hs-identifier hs-var">Fixture.entity</span></a></span><span> </span><span class="annot"><span class="annottext">User
</span><a href="Fission.Internal.Fixture.User.html#user"><span class="hs-identifier hs-var">Fixture.user</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span>  </span><span id="local-6989586621680254014"><span class="annot"><span class="annottext">getByUsername :: Username -&gt; Mock effs (Maybe (Entity User))
</span><a href="Fission.User.Retriever.Class.html#getByUsername"><span class="hs-identifier hs-var hs-var hs-var hs-var">getByUsername</span></a></span></span><span> </span><span id="local-6989586621680254012"><span class="annot"><span class="annottext">username :: Username
</span><a href="#local-6989586621680254012"><span class="hs-identifier hs-var">username</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">RetrieveUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RetrieveUser -&gt; Mock effs ()) -&gt; RetrieveUser -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Username -&gt; RetrieveUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#GetUserByUsername"><span class="hs-identifier hs-var">GetUserByUsername</span></a></span><span> </span><span class="annot"><span class="annottext">Username
</span><a href="#local-6989586621680254012"><span class="hs-identifier hs-var">username</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User)))
-&gt; (Entity User -&gt; Maybe (Entity User))
-&gt; Entity User
-&gt; Mock effs (Maybe (Entity User))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Entity User -&gt; Maybe (Entity User)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Entity User -&gt; Mock effs (Maybe (Entity User)))
-&gt; Entity User -&gt; Mock effs (Maybe (Entity User))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">User -&gt; Entity User
forall model.
ToBackendKey SqlBackend model =&gt;
model -&gt; Entity model
</span><a href="Fission.Internal.Fixture.Entity.html#entity"><span class="hs-identifier hs-var">Fixture.entity</span></a></span><span> </span><span class="annot"><span class="annottext">User
</span><a href="Fission.Internal.Fixture.User.html#user"><span class="hs-identifier hs-var">Fixture.user</span></a></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621680254010"><span class="annot"><span class="annottext">getByPublicKey :: Public -&gt; Mock effs (Maybe (Entity User))
</span><a href="Fission.User.Retriever.Class.html#getByPublicKey"><span class="hs-identifier hs-var hs-var hs-var hs-var">getByPublicKey</span></a></span></span><span> </span><span id="local-6989586621680254008"><span class="annot"><span class="annottext">pk :: Public
</span><a href="#local-6989586621680254008"><span class="hs-identifier hs-var">pk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="annottext">RetrieveUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RetrieveUser -&gt; Mock effs ()) -&gt; RetrieveUser -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Public -&gt; RetrieveUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#GetUserByPublicKey"><span class="hs-identifier hs-var">GetUserByPublicKey</span></a></span><span> </span><span class="annot"><span class="annottext">Public
</span><a href="#local-6989586621680254008"><span class="hs-identifier hs-var">pk</span></a></span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User)))
-&gt; (Entity User -&gt; Maybe (Entity User))
-&gt; Entity User
-&gt; Mock effs (Maybe (Entity User))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Entity User -&gt; Maybe (Entity User)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Entity User -&gt; Mock effs (Maybe (Entity User)))
-&gt; Entity User -&gt; Mock effs (Maybe (Entity User))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">User -&gt; Entity User
forall model.
ToBackendKey SqlBackend model =&gt;
model -&gt; Entity model
</span><a href="Fission.Internal.Fixture.Entity.html#entity"><span class="hs-identifier hs-var">Fixture.entity</span></a></span><span> </span><span class="annot"><span class="annottext">User
</span><a href="Fission.Internal.Fixture.User.html#user"><span class="hs-identifier hs-var">Fixture.user</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span>  </span><span id="local-6989586621680254006"><span class="annot"><span class="annottext">getByHerokuAddOnId :: HerokuAddOnId -&gt; Mock effs (Maybe (Entity User))
</span><a href="Fission.User.Retriever.Class.html#getByHerokuAddOnId"><span class="hs-identifier hs-var hs-var hs-var hs-var">getByHerokuAddOnId</span></a></span></span><span> </span><span id="local-6989586621680254004"><span class="annot"><span class="annottext">id :: HerokuAddOnId
</span><a href="#local-6989586621680254004"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">RetrieveUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RetrieveUser -&gt; Mock effs ()) -&gt; RetrieveUser -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HerokuAddOnId -&gt; RetrieveUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#GetUserByHerokuAddOnId"><span class="hs-identifier hs-var">GetUserByHerokuAddOnId</span></a></span><span> </span><span class="annot"><span class="annottext">HerokuAddOnId
</span><a href="#local-6989586621680254004"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User)))
-&gt; (Entity User -&gt; Maybe (Entity User))
-&gt; Entity User
-&gt; Mock effs (Maybe (Entity User))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Entity User -&gt; Maybe (Entity User)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Entity User -&gt; Mock effs (Maybe (Entity User)))
-&gt; Entity User -&gt; Mock effs (Maybe (Entity User))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">User -&gt; Entity User
forall model.
ToBackendKey SqlBackend model =&gt;
model -&gt; Entity model
</span><a href="Fission.Internal.Fixture.Entity.html#entity"><span class="hs-identifier hs-var">Fixture.entity</span></a></span><span> </span><span class="annot"><span class="annottext">User
</span><a href="Fission.Internal.Fixture.User.html#user"><span class="hs-identifier hs-var">Fixture.user</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>  </span><span id="local-6989586621680254002"><span class="annot"><span class="annottext">getByEmail :: Email -&gt; Mock effs (Maybe (Entity User))
</span><a href="Fission.User.Retriever.Class.html#getByEmail"><span class="hs-identifier hs-var hs-var hs-var hs-var">getByEmail</span></a></span></span><span> </span><span id="local-6989586621680254000"><span class="annot"><span class="annottext">email :: Email
</span><a href="#local-6989586621680254000"><span class="hs-identifier hs-var">email</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-227"></span><span>    </span><span class="annot"><span class="annottext">RetrieveUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RetrieveUser -&gt; Mock effs ()) -&gt; RetrieveUser -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Email -&gt; RetrieveUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#GetUserByEmail"><span class="hs-identifier hs-var">GetUserByEmail</span></a></span><span> </span><span class="annot"><span class="annottext">Email
</span><a href="#local-6989586621680254000"><span class="hs-identifier hs-var">email</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Entity User) -&gt; Mock effs (Maybe (Entity User)))
-&gt; (Entity User -&gt; Maybe (Entity User))
-&gt; Entity User
-&gt; Mock effs (Maybe (Entity User))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Entity User -&gt; Maybe (Entity User)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Entity User -&gt; Mock effs (Maybe (Entity User)))
-&gt; Entity User -&gt; Mock effs (Maybe (Entity User))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">User -&gt; Entity User
forall model.
ToBackendKey SqlBackend model =&gt;
model -&gt; Entity model
</span><a href="Fission.Internal.Fixture.Entity.html#entity"><span class="hs-identifier hs-var">Fixture.entity</span></a></span><span> </span><span class="annot"><span class="annottext">User
</span><a href="Fission.Internal.Fixture.User.html#user"><span class="hs-identifier hs-var">Fixture.user</span></a></span></span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span id="local-6989586621680253998"><span class="hs-keyword">instance</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#CreateHerokuAddOn"><span class="hs-identifier hs-type">CreateHerokuAddOn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253998"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#CreateUser"><span class="hs-identifier hs-type">CreateUser</span></a></span><span>        </span><span class="annot"><a href="#local-6989586621680253998"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#UpdateRoute53"><span class="hs-identifier hs-type">UpdateRoute53</span></a></span><span>     </span><span class="annot"><a href="#local-6989586621680253998"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.User.Creator.Class.html#Creator"><span class="hs-identifier hs-type">User.Creator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253998"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>  </span><span id="local-6989586621680253992"><span class="annot"><span class="annottext">create :: Username
-&gt; Public -&gt; Email -&gt; UTCTime -&gt; Mock effs (Either Errors UserId)
</span><a href="Fission.User.Creator.Class.html#create"><span class="hs-identifier hs-var hs-var hs-var hs-var">create</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><span class="annottext">CreateUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">CreateUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#CreateUser"><span class="hs-identifier hs-var">CreateUser</span></a></span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><span class="annottext">UpdateRoute53 -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateRoute53
</span><a href="Fission.Internal.Mock.Effect.Types.html#UpdateRoute53"><span class="hs-identifier hs-var">UpdateRoute53</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><span class="annottext">Either Errors UserId -&gt; Mock effs (Either Errors UserId)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Errors UserId -&gt; Mock effs (Either Errors UserId))
-&gt; (UserId -&gt; Either Errors UserId)
-&gt; UserId
-&gt; Mock effs (Either Errors UserId)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; Either Errors UserId
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UserId -&gt; Mock effs (Either Errors UserId))
-&gt; UserId -&gt; Mock effs (Either Errors UserId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; UserId
forall record.
ToBackendKey SqlBackend record =&gt;
Int64 -&gt; Key record
</span><span class="hs-identifier hs-var">Database.toSqlKey</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span>  </span><span id="local-6989586621680253989"><span class="annot"><span class="annottext">createWithPassword :: Username
-&gt; Password -&gt; Email -&gt; UTCTime -&gt; Mock effs (Either Errors UserId)
</span><a href="Fission.User.Creator.Class.html#createWithPassword"><span class="hs-identifier hs-var hs-var hs-var hs-var">createWithPassword</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><span class="annottext">CreateUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">CreateUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#CreateUser"><span class="hs-identifier hs-var">CreateUser</span></a></span><span>
</span><span id="line-243"></span><span>    </span><span class="annot"><span class="annottext">UpdateRoute53 -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateRoute53
</span><a href="Fission.Internal.Mock.Effect.Types.html#UpdateRoute53"><span class="hs-identifier hs-var">UpdateRoute53</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">UserId -&gt; Either Errors UserId
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64 -&gt; UserId
forall record.
ToBackendKey SqlBackend record =&gt;
Int64 -&gt; Key record
</span><span class="hs-identifier hs-var">Database.toSqlKey</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span>  </span><span id="local-6989586621680253987"><span class="annot"><span class="annottext">createWithHeroku :: UUID
-&gt; Region
-&gt; Username
-&gt; Password
-&gt; UTCTime
-&gt; Mock effs (Either Errors UserId)
</span><a href="Fission.User.Creator.Class.html#createWithHeroku"><span class="hs-identifier hs-var hs-var hs-var hs-var">createWithHeroku</span></a></span></span><span> </span><span id="local-6989586621680253985"><span class="annot"><span class="annottext">uuid :: UUID
</span><a href="#local-6989586621680253985"><span class="hs-identifier hs-var">uuid</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><span class="annottext">CreateUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">CreateUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#CreateUser"><span class="hs-identifier hs-var">CreateUser</span></a></span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><span class="annottext">CreateHerokuAddOn -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(CreateHerokuAddOn -&gt; Mock effs ())
-&gt; CreateHerokuAddOn -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UUID -&gt; CreateHerokuAddOn
</span><a href="Fission.Internal.Mock.Effect.Types.html#CreateHerokuAddOn"><span class="hs-identifier hs-var">CreateHerokuAddOn</span></a></span><span> </span><span class="annot"><span class="annottext">UUID
</span><a href="#local-6989586621680253985"><span class="hs-identifier hs-var">uuid</span></a></span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><span class="annottext">Either Errors UserId -&gt; Mock effs (Either Errors UserId)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Errors UserId -&gt; Mock effs (Either Errors UserId))
-&gt; (UserId -&gt; Either Errors UserId)
-&gt; UserId
-&gt; Mock effs (Either Errors UserId)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; Either Errors UserId
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UserId -&gt; Mock effs (Either Errors UserId))
-&gt; UserId -&gt; Mock effs (Either Errors UserId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; UserId
forall record.
ToBackendKey SqlBackend record =&gt;
Int64 -&gt; Key record
</span><span class="hs-identifier hs-var">Database.toSqlKey</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span id="local-6989586621680253984"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#ModifyUser"><span class="hs-identifier hs-type">ModifyUser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253984"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.User.Modifier.Class.html#Modifier"><span class="hs-identifier hs-type">User.Modifier</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253984"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-252"></span><span>  </span><span id="local-6989586621680253978"><span class="annot"><span class="annottext">updatePassword :: UserId
-&gt; Password -&gt; UTCTime -&gt; Mock effs (Either FailedDigest Password)
</span><a href="Fission.User.Modifier.Class.html#updatePassword"><span class="hs-identifier hs-var hs-var hs-var hs-var">updatePassword</span></a></span></span><span> </span><span id="local-6989586621680253976"><span class="annot"><span class="annottext">uID :: UserId
</span><a href="#local-6989586621680253976"><span class="hs-identifier hs-var">uID</span></a></span></span><span> </span><span id="local-6989586621680253975"><span class="annot"><span class="annottext">password :: Password
</span><a href="#local-6989586621680253975"><span class="hs-identifier hs-var">password</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><span class="annottext">ModifyUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(ModifyUser -&gt; Mock effs ()) -&gt; ModifyUser -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; ModifyUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#ModifyUser"><span class="hs-identifier hs-var">ModifyUser</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253976"><span class="hs-identifier hs-var">uID</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Password -&gt; Either FailedDigest Password
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Password
</span><a href="#local-6989586621680253975"><span class="hs-identifier hs-var">password</span></a></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span>  </span><span id="local-6989586621680253973"><span class="annot"><span class="annottext">updatePublicKey :: UserId -&gt; Public -&gt; UTCTime -&gt; Mock effs (Either Errors Public)
</span><a href="Fission.User.Modifier.Class.html#updatePublicKey"><span class="hs-identifier hs-var hs-var hs-var hs-var">updatePublicKey</span></a></span></span><span> </span><span id="local-6989586621680253971"><span class="annot"><span class="annottext">uID :: UserId
</span><a href="#local-6989586621680253971"><span class="hs-identifier hs-var">uID</span></a></span></span><span> </span><span id="local-6989586621680253970"><span class="annot"><span class="annottext">newPK :: Public
</span><a href="#local-6989586621680253970"><span class="hs-identifier hs-var">newPK</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-257"></span><span>    </span><span class="annot"><span class="annottext">ModifyUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(ModifyUser -&gt; Mock effs ()) -&gt; ModifyUser -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; ModifyUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#ModifyUser"><span class="hs-identifier hs-var">ModifyUser</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253971"><span class="hs-identifier hs-var">uID</span></a></span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Public -&gt; Either Errors Public
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Public
</span><a href="#local-6989586621680253970"><span class="hs-identifier hs-var">newPK</span></a></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span>  </span><span id="local-6989586621680253969"><span class="annot"><span class="annottext">setData :: UserId -&gt; CID -&gt; UTCTime -&gt; Mock effs (Either Errors ())
</span><a href="Fission.User.Modifier.Class.html#setData"><span class="hs-identifier hs-var hs-var hs-var hs-var">setData</span></a></span></span><span> </span><span id="local-6989586621680253967"><span class="annot"><span class="annottext">uID :: UserId
</span><a href="#local-6989586621680253967"><span class="hs-identifier hs-var">uID</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><span class="annottext">ModifyUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(ModifyUser -&gt; Mock effs ()) -&gt; ModifyUser -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; ModifyUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#ModifyUser"><span class="hs-identifier hs-var">ModifyUser</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253967"><span class="hs-identifier hs-var">uID</span></a></span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="annot"><span class="annottext">Either Errors ()
forall err. Either err ()
</span><a href="Fission.Prelude.html#ok"><span class="hs-identifier hs-var">ok</span></a></span></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span id="local-6989586621680253965"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#DestroyUser"><span class="hs-identifier hs-type">DestroyUser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253965"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.User.Destroyer.Class.html#Destroyer"><span class="hs-identifier hs-type">User.Destroyer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253965"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-265"></span><span>  </span><span id="local-6989586621680253961"><span class="annot"><span class="annottext">deactivate :: UserId
-&gt; UserId -&gt; Mock effs (Either (ActionNotAuthorized User) ())
</span><a href="Fission.User.Destroyer.Class.html#deactivate"><span class="hs-identifier hs-var hs-var hs-var hs-var">deactivate</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680253959"><span class="annot"><span class="annottext">uid :: UserId
</span><a href="#local-6989586621680253959"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="annottext">DestroyUser -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(DestroyUser -&gt; Mock effs ()) -&gt; DestroyUser -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; DestroyUser
</span><a href="Fission.Internal.Mock.Effect.Types.html#DestroyUser"><span class="hs-identifier hs-var">DestroyUser</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253959"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="annot"><span class="annottext">Either (ActionNotAuthorized User) ()
forall err. Either err ()
</span><a href="Fission.Prelude.html#ok"><span class="hs-identifier hs-var">ok</span></a></span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span id="local-6989586621680253957"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#RetrieveLoosePin"><span class="hs-identifier hs-type">RetrieveLoosePin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253957"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.LoosePin.Retriever.Class.html#Retriever"><span class="hs-identifier hs-type">LoosePin.Retriever</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253957"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-270"></span><span>  </span><span id="local-6989586621680253952"><span class="annot"><span class="annottext">getByUserId :: UserId -&gt; Mock effs [Entity LoosePin]
</span><a href="Fission.LoosePin.Retriever.Class.html#getByUserId"><span class="hs-identifier hs-var hs-var hs-var hs-var">getByUserId</span></a></span></span><span> </span><span id="local-6989586621680253950"><span class="annot"><span class="annottext">uid :: UserId
</span><a href="#local-6989586621680253950"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><span class="annottext">RetrieveLoosePin -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RetrieveLoosePin -&gt; Mock effs ())
-&gt; RetrieveLoosePin -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; RetrieveLoosePin
</span><a href="Fission.Internal.Mock.Effect.Types.html#GetLoosePinByUserId"><span class="hs-identifier hs-var">GetLoosePinByUserId</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253950"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-274"></span><span>      </span><span id="local-6989586621680253948"><span class="annot"><span class="annottext">userId :: Key record
</span><a href="#local-6989586621680253948"><span class="hs-identifier hs-var hs-var">userId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Key record
forall record.
ToBackendKey SqlBackend record =&gt;
Int64 -&gt; Key record
</span><span class="hs-identifier hs-var">Database.toSqlKey</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-275"></span><span>      </span><span id="local-6989586621680253947"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680253947"><span class="hs-identifier hs-var hs-var">cid</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; CID
</span><span class="hs-identifier hs-var">IPFS.CID</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Qm12345&quot;</span></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><span class="annottext">[Entity LoosePin] -&gt; Mock effs [Entity LoosePin]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">([Entity LoosePin] -&gt; Mock effs [Entity LoosePin])
-&gt; (LoosePin -&gt; [Entity LoosePin])
-&gt; LoosePin
-&gt; Mock effs [Entity LoosePin]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Entity LoosePin -&gt; [Entity LoosePin]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Entity LoosePin -&gt; [Entity LoosePin])
-&gt; (LoosePin -&gt; Entity LoosePin) -&gt; LoosePin -&gt; [Entity LoosePin]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LoosePin -&gt; Entity LoosePin
forall model.
ToBackendKey SqlBackend model =&gt;
model -&gt; Entity model
</span><a href="Fission.Internal.Fixture.Entity.html#entity"><span class="hs-identifier hs-var">Fixture.entity</span></a></span><span> </span><span class="annot"><span class="annottext">(LoosePin -&gt; Mock effs [Entity LoosePin])
-&gt; LoosePin -&gt; Mock effs [Entity LoosePin]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; CID -&gt; UTCTime -&gt; LoosePin
</span><a href="Fission.Models.html#LoosePin"><span class="hs-identifier hs-var">LoosePin</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
forall record. ToBackendKey SqlBackend record =&gt; Key record
</span><a href="#local-6989586621680253948"><span class="hs-identifier hs-var">userId</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680253947"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="Fission.Internal.Fixture.Time.html#agesAgo"><span class="hs-identifier hs-var">Fixture.agesAgo</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span>  </span><span id="local-6989586621680253943"><span class="annot"><span class="annottext">getByCids :: [CID] -&gt; Mock effs [Entity LoosePin]
</span><a href="Fission.LoosePin.Retriever.Class.html#getByCids"><span class="hs-identifier hs-var hs-var hs-var hs-var">getByCids</span></a></span></span><span> </span><span id="local-6989586621680253941"><span class="annot"><span class="annottext">cids :: [CID]
</span><a href="#local-6989586621680253941"><span class="hs-identifier hs-var">cids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Mock effs (Entity LoosePin)] -&gt; Mock effs [Entity LoosePin]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">([Mock effs (Entity LoosePin)] -&gt; Mock effs [Entity LoosePin])
-&gt; ((Int64, [Mock effs (Entity LoosePin)])
    -&gt; [Mock effs (Entity LoosePin)])
-&gt; (Int64, [Mock effs (Entity LoosePin)])
-&gt; Mock effs [Entity LoosePin]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Int64, [Mock effs (Entity LoosePin)])
-&gt; [Mock effs (Entity LoosePin)]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Int64, [Mock effs (Entity LoosePin)])
 -&gt; Mock effs [Entity LoosePin])
-&gt; (Int64, [Mock effs (Entity LoosePin)])
-&gt; Mock effs [Entity LoosePin]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(CID
 -&gt; (Int64, [Mock effs (Entity LoosePin)])
 -&gt; (Int64, [Mock effs (Entity LoosePin)]))
-&gt; (Int64, [Mock effs (Entity LoosePin)])
-&gt; [CID]
-&gt; (Int64, [Mock effs (Entity LoosePin)])
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">CID
-&gt; (Int64, [Mock effs (Entity LoosePin)])
-&gt; (Int64, [Mock effs (Entity LoosePin)])
</span><a href="#local-6989586621680253938"><span class="hs-identifier hs-var">folder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CID]
</span><a href="#local-6989586621680253941"><span class="hs-identifier hs-var">cids</span></a></span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-281"></span><span>      </span><span id="local-6989586621680253938"><span class="annot"><span class="annottext">folder :: CID
-&gt; (Int64, [Mock effs (Entity LoosePin)])
-&gt; (Int64, [Mock effs (Entity LoosePin)])
</span><a href="#local-6989586621680253938"><span class="hs-identifier hs-var hs-var">folder</span></a></span></span><span> </span><span id="local-6989586621680253937"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680253937"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680253936"><span class="annot"><span class="annottext">counter :: Int64
</span><a href="#local-6989586621680253936"><span class="hs-identifier hs-var">counter</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680253935"><span class="annot"><span class="annottext">acc :: [Mock effs (Entity LoosePin)]
</span><a href="#local-6989586621680253935"><span class="hs-identifier hs-var">acc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621680253936"><span class="hs-identifier hs-var">counter</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Int64 -&gt; Int64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CID -&gt; Int64 -&gt; Mock effs (Entity LoosePin)
</span><a href="#local-6989586621680253933"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680253937"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621680253936"><span class="hs-identifier hs-var">counter</span></a></span><span> </span><span class="annot"><span class="annottext">Mock effs (Entity LoosePin)
-&gt; [Mock effs (Entity LoosePin)] -&gt; [Mock effs (Entity LoosePin)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Mock effs (Entity LoosePin)]
</span><a href="#local-6989586621680253935"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span>      </span><span class="annot"><a href="#local-6989586621680253933"><span class="hs-identifier hs-type">action</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IPFS.CID</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253957"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Entity</span></span><span> </span><span class="annot"><a href="Fission.Models.html#LoosePin"><span class="hs-identifier hs-type">LoosePin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>      </span><span id="local-6989586621680253933"><span class="annot"><span class="annottext">action :: CID -&gt; Int64 -&gt; Mock effs (Entity LoosePin)
</span><a href="#local-6989586621680253933"><span class="hs-identifier hs-var hs-var">action</span></a></span></span><span> </span><span id="local-6989586621680253932"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680253932"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span id="local-6989586621680253931"><span class="annot"><span class="annottext">rawUserId :: Int64
</span><a href="#local-6989586621680253931"><span class="hs-identifier hs-var">rawUserId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-286"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680253930"><span class="annot"><span class="annottext">userId :: UserId
</span><a href="#local-6989586621680253930"><span class="hs-identifier hs-var hs-var">userId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; UserId
forall record.
ToBackendKey SqlBackend record =&gt;
Int64 -&gt; Key record
</span><span class="hs-identifier hs-var">Database.toSqlKey</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621680253931"><span class="hs-identifier hs-var">rawUserId</span></a></span><span>
</span><span id="line-287"></span><span>        </span><span class="annot"><span class="annottext">RetrieveLoosePin -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(RetrieveLoosePin -&gt; Mock effs ())
-&gt; RetrieveLoosePin -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CID -&gt; RetrieveLoosePin
</span><a href="Fission.Internal.Mock.Effect.Types.html#GetLoosePinByCID"><span class="hs-identifier hs-var">GetLoosePinByCID</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680253932"><span class="hs-identifier hs-var">cid</span></a></span><span>
</span><span id="line-288"></span><span>        </span><span class="annot"><span class="annottext">Entity LoosePin -&gt; Mock effs (Entity LoosePin)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Entity LoosePin -&gt; Mock effs (Entity LoosePin))
-&gt; (LoosePin -&gt; Entity LoosePin)
-&gt; LoosePin
-&gt; Mock effs (Entity LoosePin)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LoosePin -&gt; Entity LoosePin
forall model.
ToBackendKey SqlBackend model =&gt;
model -&gt; Entity model
</span><a href="Fission.Internal.Fixture.Entity.html#entity"><span class="hs-identifier hs-var">Fixture.entity</span></a></span><span> </span><span class="annot"><span class="annottext">(LoosePin -&gt; Mock effs (Entity LoosePin))
-&gt; LoosePin -&gt; Mock effs (Entity LoosePin)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; CID -&gt; UTCTime -&gt; LoosePin
</span><a href="Fission.Models.html#LoosePin"><span class="hs-identifier hs-var">LoosePin</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253930"><span class="hs-identifier hs-var">userId</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680253932"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="Fission.Internal.Fixture.Time.html#agesAgo"><span class="hs-identifier hs-var">Fixture.agesAgo</span></a></span></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span id="local-6989586621680253928"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#CreateLoosePin"><span class="hs-identifier hs-type">CreateLoosePin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253928"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.LoosePin.Creator.Class.html#Creator"><span class="hs-identifier hs-type">LoosePin.Creator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253928"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-291"></span><span>  </span><span id="local-6989586621680253923"><span class="annot"><span class="annottext">create :: UserId -&gt; CID -&gt; UTCTime -&gt; Mock effs (Maybe LoosePinId)
</span><a href="Fission.LoosePin.Creator.Class.html#create"><span class="hs-identifier hs-var hs-var hs-var hs-var">create</span></a></span></span><span> </span><span id="local-6989586621680253921"><span class="annot"><span class="annottext">uid :: UserId
</span><a href="#local-6989586621680253921"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621680253920"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680253920"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-292"></span><span>    </span><span class="annot"><span class="annottext">CreateLoosePin -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(CreateLoosePin -&gt; Mock effs ()) -&gt; CreateLoosePin -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; CID -&gt; CreateLoosePin
</span><a href="Fission.Internal.Mock.Effect.Types.html#CreateLoosePin"><span class="hs-identifier hs-var">CreateLoosePin</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253921"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680253920"><span class="hs-identifier hs-var">cid</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><span class="annottext">Maybe LoosePinId -&gt; Mock effs (Maybe LoosePinId)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe LoosePinId -&gt; Mock effs (Maybe LoosePinId))
-&gt; (LoosePinId -&gt; Maybe LoosePinId)
-&gt; LoosePinId
-&gt; Mock effs (Maybe LoosePinId)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LoosePinId -&gt; Maybe LoosePinId
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(LoosePinId -&gt; Mock effs (Maybe LoosePinId))
-&gt; LoosePinId -&gt; Mock effs (Maybe LoosePinId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; LoosePinId
forall record.
ToBackendKey SqlBackend record =&gt;
Int64 -&gt; Key record
</span><span class="hs-identifier hs-var">Database.toSqlKey</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span>  </span><span id="local-6989586621680253918"><span class="annot"><span class="annottext">createMany :: UserId -&gt; [CID] -&gt; UTCTime -&gt; Mock effs [CID]
</span><a href="Fission.LoosePin.Creator.Class.html#createMany"><span class="hs-identifier hs-var hs-var hs-var hs-var">createMany</span></a></span></span><span> </span><span id="local-6989586621680253916"><span class="annot"><span class="annottext">uid :: UserId
</span><a href="#local-6989586621680253916"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621680253915"><span class="annot"><span class="annottext">cids :: [CID]
</span><a href="#local-6989586621680253915"><span class="hs-identifier hs-var">cids</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><span class="annottext">[CID] -&gt; (CID -&gt; Mock effs ()) -&gt; Mock effs ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="annot"><span class="annottext">[CID]
</span><a href="#local-6989586621680253915"><span class="hs-identifier hs-var">cids</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680253913"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680253913"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-297"></span><span>      </span><span class="annot"><span class="annottext">CreateLoosePin -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(CreateLoosePin -&gt; Mock effs ()) -&gt; CreateLoosePin -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; CID -&gt; CreateLoosePin
</span><a href="Fission.Internal.Mock.Effect.Types.html#CreateLoosePin"><span class="hs-identifier hs-var">CreateLoosePin</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253916"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680253913"><span class="hs-identifier hs-var">cid</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="annot"><span class="annottext">[CID]
</span><a href="#local-6989586621680253915"><span class="hs-identifier hs-var">cids</span></a></span></span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span id="local-6989586621680253912"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsMember</span></span><span> </span><span class="annot"><a href="Fission.Internal.Mock.Effect.Types.html#DestroyLoosePin"><span class="hs-identifier hs-type">DestroyLoosePin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253912"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Fission.LoosePin.Destroyer.Class.html#Destroyer"><span class="hs-identifier hs-type">LoosePin.Destroyer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253912"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-302"></span><span>  </span><span id="local-6989586621680253907"><span class="annot"><span class="annottext">destroy :: UserId -&gt; CID -&gt; Mock effs ()
</span><a href="Fission.LoosePin.Destroyer.Class.html#destroy"><span class="hs-identifier hs-var hs-var hs-var hs-var">destroy</span></a></span></span><span> </span><span id="local-6989586621680253905"><span class="annot"><span class="annottext">userId :: UserId
</span><a href="#local-6989586621680253905"><span class="hs-identifier hs-var">userId</span></a></span></span><span> </span><span id="local-6989586621680253904"><span class="annot"><span class="annottext">cid :: CID
</span><a href="#local-6989586621680253904"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-303"></span><span>    </span><span class="annot"><span class="annottext">DestroyLoosePin -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(DestroyLoosePin -&gt; Mock effs ())
-&gt; DestroyLoosePin -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; CID -&gt; DestroyLoosePin
</span><a href="Fission.Internal.Mock.Effect.Types.html#DestroyLoosePin"><span class="hs-identifier hs-var">DestroyLoosePin</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253905"><span class="hs-identifier hs-var">userId</span></a></span><span> </span><span class="annot"><span class="annottext">CID
</span><a href="#local-6989586621680253904"><span class="hs-identifier hs-var">cid</span></a></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span>  </span><span id="local-6989586621680253902"><span class="annot"><span class="annottext">destroyMany :: UserId -&gt; [LoosePinId] -&gt; Mock effs ()
</span><a href="Fission.LoosePin.Destroyer.Class.html#destroyMany"><span class="hs-identifier hs-var hs-var hs-var hs-var">destroyMany</span></a></span></span><span> </span><span id="local-6989586621680253900"><span class="annot"><span class="annottext">userId :: UserId
</span><a href="#local-6989586621680253900"><span class="hs-identifier hs-var">userId</span></a></span></span><span> </span><span id="local-6989586621680253899"><span class="annot"><span class="annottext">cidIds :: [LoosePinId]
</span><a href="#local-6989586621680253899"><span class="hs-identifier hs-var">cidIds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-306"></span><span>    </span><span class="annot"><span class="annottext">[LoosePinId] -&gt; (LoosePinId -&gt; Mock effs ()) -&gt; Mock effs ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="annot"><span class="annottext">[LoosePinId]
</span><a href="#local-6989586621680253899"><span class="hs-identifier hs-var">cidIds</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680253898"><span class="annot"><span class="annottext">id :: LoosePinId
</span><a href="#local-6989586621680253898"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-307"></span><span>      </span><span class="annot"><span class="annottext">DestroyLoosePin -&gt; Mock effs ()
forall eff (log :: [*]) (t :: * -&gt; *) (m :: * -&gt; *).
(IsMember eff log, Applicative t,
 MonadWriter (t (OpenUnion log)) m) =&gt;
eff -&gt; m ()
</span><a href="Fission.Internal.Mock.Effect.html#log"><span class="hs-identifier hs-var">Effect.log</span></a></span><span> </span><span class="annot"><span class="annottext">(DestroyLoosePin -&gt; Mock effs ())
-&gt; DestroyLoosePin -&gt; Mock effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UserId -&gt; LoosePinId -&gt; DestroyLoosePin
</span><a href="Fission.Internal.Mock.Effect.Types.html#DestroyLoosePinById"><span class="hs-identifier hs-var">DestroyLoosePinById</span></a></span><span> </span><span class="annot"><span class="annottext">UserId
</span><a href="#local-6989586621680253900"><span class="hs-identifier hs-var">userId</span></a></span><span> </span><span class="annot"><span class="annottext">LoosePinId
</span><a href="#local-6989586621680253898"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span id="local-6989586621680253896"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Fission.Web.Client.Auth.Class.html#MonadWebAuth"><span class="hs-identifier hs-type">MonadWebAuth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Fission.Internal.Mock.Types.html#Mock"><span class="hs-identifier hs-type">Mock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680253896"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Fission.Authorization.Types.html#Authorization"><span class="hs-identifier hs-type">Authorization</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>  </span><span id="local-6989586621680253892"><span class="annot"><span class="annottext">getAuth :: Mock effs Authorization
</span><a href="Fission.Web.Client.Auth.Class.html#getAuth"><span class="hs-identifier hs-var hs-var hs-var hs-var">getAuth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Authorization -&gt; Mock effs Authorization
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">$WAuthorization :: Either Heroku DID
-&gt; Entity User -&gt; Potency -&gt; Text -&gt; Authorization
</span><a href="Fission.Authorization.Types.html#%24WAuthorization"><span class="hs-identifier hs-type hs-type">Authorization</span></a></span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:sender:Authorization :: Either Heroku DID
</span><a href="#local-6989586621680253888"><span class="hs-identifier hs-var">sender</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DID -&gt; Either Heroku DID
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">DID
</span><a href="#local-6989586621680253887"><span class="hs-identifier hs-var">did</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:about:Authorization :: Entity User
</span><a href="#local-6989586621680253886"><span class="hs-identifier hs-var">about</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">User -&gt; Entity User
forall model.
ToBackendKey SqlBackend model =&gt;
model -&gt; Entity model
</span><a href="Fission.Internal.Fixture.Entity.html#entity"><span class="hs-identifier hs-var">Fixture.entity</span></a></span><span> </span><span class="annot"><span class="annottext">User
</span><a href="Fission.Internal.Fixture.User.html#user"><span class="hs-identifier hs-var">Fixture.user</span></a></span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:potency:Authorization :: Potency
</span><a href="#local-6989586621680253885"><span class="hs-identifier hs-var">potency</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Potency
</span><a href="Fission.Authorization.Potency.Types.html#AppendOnly"><span class="hs-identifier hs-var">AppendOnly</span></a></span><span>
</span><span id="line-314"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:scope:Authorization :: Text
</span><a href="#local-6989586621680253883"><span class="hs-identifier hs-var">scope</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;/test/&quot;</span></span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-316"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-317"></span><span>      </span><span id="local-6989586621680253887"><span class="annot"><span class="annottext">did :: DID
</span><a href="#local-6989586621680253887"><span class="hs-identifier hs-var hs-var">did</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">$WDID :: Public -&gt; Method -&gt; DID
</span><a href="Fission.User.DID.Types.html#%24WDID"><span class="hs-identifier hs-type hs-type">DID</span></a></span><span>
</span><span id="line-318"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:publicKey:DID :: Public
</span><a href="#local-6989586621680253880"><span class="hs-identifier hs-var">publicKey</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Public
</span><a href="Fission.Internal.Fixture.Key.Ed25519.html#pk"><span class="hs-identifier hs-var">Ed25519.pk</span></a></span><span>
</span><span id="line-319"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:method:DID :: Method
</span><a href="#local-6989586621680253878"><span class="hs-identifier hs-var">method</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Method
</span><a href="Fission.User.DID.Method.Types.html#Key"><span class="hs-identifier hs-var">Key</span></a></span><span>
</span><span id="line-320"></span><span>        </span><span class="hs-special">}</span></span><span>
</span><span id="line-321"></span></pre></body></html>